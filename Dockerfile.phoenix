# Phoenix V2 专用 Dockerfile
FROM apache/airflow:2.9.2-python3.11

# 安装Phoenix V2所需的额外依赖
RUN pip install --no-cache-dir eventregistry

# 设置工作目录
WORKDIR /opt/airflow

# 复制Phoenix专用文件
COPY dags/phoenix /opt/airflow/dags
COPY scraper /opt/airflow/scraper
COPY utils /opt/airflow/utils

# 设置环境变量
ENV PYTHONPATH=/opt/airflow

# 暴露端口
EXPOSE 8080

# 默认命令
CMD ["webserver"] 